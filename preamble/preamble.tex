\usepackage{graphicx}
\usepackage{verbatim}
\usepackage{latexsym}
% \usepackage{mathchars}
\usepackage{setspace}
\usepackage{amsmath}

\usepackage{hyperref}

\input{preamble/blocked.sty}
\input{preamble/uhead.sty}
\input{preamble/boxit.sty}
\input{preamble/icthesis.sty}

\newcommand{\ipc}{{\sf ipc}}

\newcommand{\Prob}{\bbbp}
\newcommand{\Real}{\bbbr}
\newcommand{\real}{\Real}
\newcommand{\Int}{\bbbz}
\newcommand{\Nat}{\bbbn}

\newcommand{\NN}{{\sf I\kern-0.14emN}}   % Natural numbers
\newcommand{\ZZ}{{\sf Z\kern-0.45emZ}}   % Integers
\newcommand{\QQQ}{{\sf C\kern-0.48emQ}}   % Rational numbers
\newcommand{\RR}{{\sf I\kern-0.14emR}}   % Real numbers
\newcommand{\KK}{{\cal K}}
\newcommand{\OO}{{\cal O}}
\newcommand{\AAA}{{\bf A}}
\newcommand{\HH}{{\bf H}}
\newcommand{\II}{{\bf I}}
\newcommand{\LL}{{\bf L}}
\newcommand{\PP}{{\bf P}}
\newcommand{\PPprime}{{\bf P'}}
\newcommand{\QQ}{{\bf Q}}
\newcommand{\UU}{{\bf U}}
\newcommand{\UUprime}{{\bf U'}}
\newcommand{\zzero}{{\bf 0}}
\newcommand{\ppi}{\mbox{\boldmath $\pi$}}
\newcommand{\aalph}{\mbox{\boldmath $\alpha$}}
\newcommand{\bb}{{\bf b}}
\newcommand{\ee}{{\bf e}}
\newcommand{\mmu}{\mbox{\boldmath $\mu$}}
\newcommand{\vv}{{\bf v}}
\newcommand{\xx}{{\bf x}}
\newcommand{\yy}{{\bf y}}
\newcommand{\zz}{{\bf z}}
\newcommand{\oomeg}{\mbox{\boldmath $\omega$}}
\newcommand{\res}{{\bf res}}
\newcommand{\cchi}{{\mbox{\raisebox{.4ex}{$\chi$}}}}
%\newcommand{\cchi}{{\cal X}}
%\newcommand{\cchi}{\mbox{\Large $\chi$}}

% Logical operators and symbols
\newcommand{\imply}{\Rightarrow}
\newcommand{\bimply}{\Leftrightarrow}
\newcommand{\union}{\cup}
\newcommand{\intersect}{\cap}
\newcommand{\boolor}{\vee}
\newcommand{\booland}{\wedge}
\newcommand{\boolimply}{\imply}
\newcommand{\boolbimply}{\bimply}
\newcommand{\boolnot}{\neg}
\newcommand{\boolsat}{\!\models}
\newcommand{\boolnsat}{\!\not\models}


\newcommand{\op}[1]{\mathrm{#1}}
\newcommand{\s}[1]{\ensuremath{\mathcal #1}}

% Properly styled differentiation and integration operators
\newcommand{\diff}[1]{\mathrm{\frac{d}{d\mathit{#1}}}}
\newcommand{\diffII}[1]{\mathrm{\frac{d^2}{d\mathit{#1}^2}}}
\newcommand{\intg}[4]{\int_{#3}^{#4} #1 \, \mathrm{d}#2}
\newcommand{\intgd}[4]{\int\!\!\!\!\int_{#4} #1 \, \mathrm{d}#2 \, \mathrm{d}#3}

% Large () brackets on different lines of an eqnarray environment
\newcommand{\Leftbrace}[1]{\left(\raisebox{0mm}[#1][#1]{}\right.}
\newcommand{\Rightbrace}[1]{\left.\raisebox{0mm}[#1][#1]{}\right)}

% Funky symobols for footnotes
\newcommand{\symbolfootnote}{\renewcommand{\thefootnote}{\fnsymbol{footnote}}}
% now add \symbolfootnote to the beginning of the document...

\newcommand{\normallinespacing}{\renewcommand{\baselinestretch}{1.5} \normalsize}
\newcommand{\mediumlinespacing}{\renewcommand{\baselinestretch}{1.2} \normalsize}
\newcommand{\narrowlinespacing}{\renewcommand{\baselinestretch}{1.0} \normalsize}
\newcommand{\bump}{\noalign{\vspace*{\doublerulesep}}}
\newcommand{\cell}{\multicolumn{1}{}{}}
\newcommand{\spann}{\mbox{span}}
\newcommand{\diagg}{\mbox{diag}}
\newcommand{\modd}{\mbox{mod}}
\newcommand{\minn}{\mbox{min}}
\newcommand{\andd}{\mbox{and}}
\newcommand{\forr}{\mbox{for}}
\newcommand{\EE}{\mbox{E}}

\newcommand{\deff}{\stackrel{\mathrm{def}}{=}}
\newcommand{\syncc}{~\stackrel{\textstyle \rhd\kern-0.57em\lhd}{\scriptstyle L}~}

\def\coop{\mbox{\large $\rhd\!\!\!\lhd$}}
\newcommand{\sync}[1]{\raisebox{-1.0ex}{$\;\stackrel{\coop}{\scriptscriptstyle
#1}\,$}}

\newtheorem{definition}{Definition}[chapter]
\newtheorem{theorem}{Theorem}[chapter]

\newcommand{\Figref}[1]{Figure~\ref{#1}}
\newcommand{\fig}[3]{
 \begin{figure}[!ht]
 \begin{center}
 \scalebox{#3}{\includegraphics{figs/#1.ps}}
 \vspace{-0.1in}
 \caption[ ]{\label{#1} #2}
 \end{center}
 \end{figure}
}

\newcommand{\figtwo}[8]{
 \begin{figure}
 \parbox[b]{#4 \textwidth}{
 \begin{center}
 \scalebox{#3}{\includegraphics{figs/#1.ps}}
 \vspace{-0.1in}
 \caption{\label{#1}#2}
 \end{center}
 }
 \hfill
 \parbox[b]{#8 \textwidth}{
 \begin{center}
 \scalebox{#7}{\includegraphics{figs/#5.ps}}
 \vspace{-0.1in}
 \caption{\label{#5}#6}
 \end{center}
 }
 \end{figure}
}

%%%%%%%%%%%%%%
% Jonny stuff

\usepackage{soul}

\usepackage{unicode-math}
\usepackage{fontspec}
\setmainfont[Path = fonts/,
    UprightFont = *-regular,
    ItalicFont = *-italic,
    BoldFont = *-bold
]{softing}

\setmathfont{STIX Two Math}
\setmathrm{STIX Two Text}
\DeclareMathSizes{12}{13}{9}{8}

% for monospace font
\setmonofont[Scale=1.1]{Inconsolata}

% for making lines fit
\emergencystretch=.5em

% for only using forename initials in bibliography
\usepackage[style=alphabetic,
    citestyle=alphabetic,
    giveninits=true,
    doi=false,
    isbn=false,
    url=false
]{biblatex}
\addbibresource{refs.bib}
% reduce bibliography font size
\renewcommand*{\bibfont}{\normalfont\small}

% for small fractions
\usepackage{xfrac}

% for getting a coloured text box
\usepackage[svgnames, table]{xcolor}
\usepackage{enumitem}
\usepackage{mdframed}

% for coloured references and urls
\hypersetup{
    colorlinks=true,
    citecolor=[rgb]{.12,.47,.81}, % tab10 blue
    linkcolor=[rgb]{0.5,0,0.13}, % tab10 red
    % filecolor=magenta,
    urlcolor=[rgb]{.09,.55,.61}, % tab10 cyan
}

% to allow urls to be broken anywhere
% \def\UrlBreaks{\do\/\do-}
\expandafter\def\expandafter\UrlBreaks\expandafter{\UrlBreaks\do\a\do\b\do\c\do\d\do\e\do\f\do\g\do\h\do\i\do\j\do\k\do\l\do\m\do\n\do\o\do\p\do\q\do\r\do\s\do\t\do\u\do\v\do\w\do\x\do\y\do\z\do\A\do\B\do\C\do\D\do\E\do\F\do\G\do\H\do\I\do\J\do\K\do\L\do\M\do\N\do\O\do\P\do\Q\do\R\do\S\do\T\do\U\do\V\do\W\do\X\do\Y\do\Z\do\/\do-}

% fix margins
\usepackage[inner=1.1in, outer=1.1in, vmargin=1.2in]{geometry}

% allow large figures to have text on same page
\renewcommand{\floatpagefraction}{.75}

% allow captions
\usepackage[labelfont=bf]{caption} 
\captionsetup[table]{skip=10pt}
% \captionsetup[figure]{font={Fira Sans}}

% allow multirow tables
\usepackage{multirow}

% to make algorithm2e work in figure
\usepackage[ruled,vlined,linesnumbered]{algorithm2e}
% to make it work in figure
\makeatletter
\newcommand{\removeAlgorithmFigureError}{\let\@latex@error\@gobble}
\makeatother

% triangle symbol is too big
\newcommand{\Triangle}{\mathchoice
  {\removeAlgorithmFigureError\raise .175ex\hbox{\larger[-2]$\triangle$}}
  {\removeAlgorithmFigureError\raise .175ex\hbox{\larger[-2]$\triangle$}}
  {\removeAlgorithmFigureError\raise .1ex\hbox{\larger[-4]$\triangle$}}
  {\removeAlgorithmFigureError\raise .1ex\hbox{\larger[-6]$\triangle$}}
}
% prevents annoying warnings
\renewcommand\RSsmallest{4pt}

% number chapters from 0
\renewcommand{\theequation}{\thechapter.\arabic{equation}}
\renewcommand{\thefigure}{\thechapter.\arabic{figure}}
\renewcommand{\thetable}{\thechapter.\arabic{table}}
\setcounter{chapter}{-1}
